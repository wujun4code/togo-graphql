
model User {
  id                Int                 @id @default(autoincrement())
  email             String              @unique
  username          String              @unique
  friendlyName      String?
  sub               String              @unique 
  snsName           String              @unique @default(cuid())

  posts             Post[]
  travelPlans       TravelPlan[]
  roles             RoleUser[]

  followers         Follow[] @relation(name: "Followers")
  followees         Follow[] @relation(name: "Followees")
}

model Role {
  id                Int                 @id @default(autoincrement())
  name              String              @unique
  description       String
  users             RoleUser[]
}

model RoleUser {
  id     Int  @id @default(autoincrement())
  roleId Int
  userId Int
  user   User @relation(fields: [userId], references: [id])
  role   Role @relation(fields: [roleId], references: [id])

  @@index([roleId, userId], name: "unique_user_role")
}
